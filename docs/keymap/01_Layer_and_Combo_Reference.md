# 01: レイヤー機能・コンボ・キーポジション対応表

このドキュメントは、Keyball (tomkey) のキーマップ構成に関する総合リファレンスです。

## 1. レイヤー構成概要

| No | 名称 | 主な機能 | 呼び出し方法 |
|:---:|:---|:---|:---|
| 0 | DEFAULT | 通常タイピング (QWERTY) | 基本レイヤー |
| 1 | MOUSE | マウスボタン操作 (K=左, L=右) | トラックボール操作 (AML) |
| 2 | SCROLL | 縦横自在スクロール | コンボ `K + L` または `lt 2 /` |
| 3 | ARROW | カーソル移動、ウィンドウ操作 | `lt 3 BSPC` または マウス内 `mo 3` |
| 4 | NUM | 数字入力、テンキーレイアウト | `lt 4 SPACE` |
| 5 | FUNCTION| F1 〜 F12 キー | `lt 5 ESC` |
| 6 | SYSTEM | BT切替、システム操作 | `mo 6` |
| 7 | VSCROLL | 縦専用スクロール (X軸抑制) | コンボ `I + O` |

---

## 2. キーポジション一覧 (Index)

ZMK の `key-positions` 指定時に使用するインデックス番号（0-indexed）です。

### 左手 / Left Hand
```text
 0  1  2  3  4                     (中央 OLED/TRRS)
10 11 12 13 14 15
22 23 24 25 26 27
34 35 36 37 38 39
```

### 右手 / Right Hand
```text
      (トラックボール)              5  6  7  8  9
                          16 17 18 19 20 21
                          28 29 30 31 32 33
                          40 41          42
```

---

## 3. 実装済みコンボ一覧

| コンボ | キー位置 | 動作 | 備考 |
| :--- | :---: | :--- | :--- |
| **`J + K`** | 18, 19 | **ミドルクリック** (MB3) | 人差し指＋中指 |
| **`K + L`** | 19, 20 | **スクロールレイヤー** (2) | 中指＋薬指 |
| **`I + O`** | 7, 8 | **縦スクロール専用** (7) | 右手最上段（定番） |

---

## 4. 各レイヤー詳細

### 0: DEFAULT
- 標準の QWERTY 配列。親指キーに `lt` が集中。
- `quick-tap-ms = <300>` を全ホールド・タップ behavior に適用済み。

### 1: MOUSE
- **AML (Auto Mouse Layer)** により、ボール動作で自動遷移。
- **K**: 左クリック (MB1) / **L**: 右クリック (MB2)
- AML維持対象キー: マウスボタン、修飾キー、I/Oキー。

### 2: SCROLL
- トラックボールがホイールとして動作。縦横の制限なし。

### 3: ARROW
- 方向キー集中レイヤー。`BSPC` 長押しで呼び出し。
- 左手側に Tab 切替や Cmd + 矢印、右手側に純粋な矢印キー。

### 7: VSCROLL (縦スクロール特化)
- **I + O** 同時押しで起動。
- X軸入力を **1/16** に減衰し、不意の横ブレを抑えて高速スクロールが可能。
