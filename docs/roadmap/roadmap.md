# ZMKコンフィグ変更ロードマップ（低リスク・低影響度順）

## 🚀 現在の進捗状況 (2026-02-26)

| 項目 | ステータス | 詳細内容 |
| :--- | :--- | :--- |
| **独立設定 (CPI)** | ✅ 完了 | 800 CPI に調整済み |
| **AML パラメータ** | ✅ 完了 | Timeout: 100s (実質永続), Idle Delay: 削除 |
| **AML 挙動 (Excluded)** | ✅ 完了 | マウスキー・修飾キー・I/Oキー押下でAML維持 |
| **Keymap (Quick-tap)** | ✅ 完了 | `mt`/`lt` に 300ms 適用 |
| **Keymap (Combos)** | ✅ 完了 | K/L配置、JK/KLコンボ、IOコンボ（縦スク限定） |

---

## 🎯 目的

- 変更影響度が小さいものから順に適用し、安全性を担保する。
- AML（Auto Mouse Layer）の挙動を Keyball/tomkey の運指に最適化する。
- 毎ステップで `git` 差分と実機確認を徹底する。

---

## 🛠️ 各フェーズの詳細

### フェーズ0: ベースライン固定 [x]
- [x] 作業前ドキュメント整備 (`docs/aml/`, `docs/keymap/`)
- [x] Git履歴の記録

### フェーズ1: 独立設定の変更 [x]
- [x] **トラックボール CPI 調整**: 800 CPI (tomkey_R.overlay)

### フェーズ2: AML パラメータの微調整 [x]
- [x] **タイムアウト延長**: 100,000ms (実質的なマニュアル復帰化)
- [x] **誤爆防止**: `require-prior-idle-ms` 試行後、Conductor思想により削除（即時反応重視）

### フェーズ3: AML 挙動の一部変更・除外設定 [x]
- [x] **AML解除キーの例外設定**: `excluded-positions` にマウス・修飾キーを追加
- [x] **入力継続性改善**: 物理キー押下中のレイヤー維持

### フェーズ4: 実機確認フローの確立 [x]
- [x] 1変更1コミットの徹底
- [x] UF2ビルド後の主要挙動チェックリスト運用

### フェーズ6: Keymap 反映と最適化 [x]
- [x] **Hold-Tap 改善**: `quick-tap-ms = <300>` による連打時の意図しないホールド防止
- [x] **マウス配置の最適化**:
    - `K` (左クリック), `L` (右クリック)
    - `J + K`コンボ: ミドルクリック (MB3)
    - `K + L`コンボ: スクロールレイヤー (Layer 2 - 縦横自由)
- [x] **縦スクロール特化機能**:
    - **`I + O`コンボ**: 縦スクロール専用レイヤー (Layer 7)
    - X軸入力を 1/16 に減衰させ、不意の横ブレを抑制

---

## 📝 今後の展望 / 残課題

- [ ] マウスレイヤー内での独自の修飾キー配置検討
- [ ] スクロール速度の微調整
